{"ast":null,"code":"import _slicedToArray from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/SalesCollection/PaymentCollection/report/AcknowledgeReport.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Card, CardBody } from \"../../../../../_metronic/_partials/controls\";\nimport { shallowEqual, useSelector } from \"react-redux\";\nimport CollectionBreadCrum from '../common/CollectionBreadCrum';\nimport CollectionTodaySales from \"../common/CollectionTodaySales\";\nimport Button from '@material-ui/core/Button';\nimport CommonDateComponent from '../../../Common/CommonDateComponent';\nimport axios from \"axios\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport { TextField } from \"@material-ui/core\";\nimport ReportSubTabs from '../common/ReportSubTabs';\nimport { showError } from \"../../../../pages/Alert\";\nexport function AcknowledgeReport(props) {\n  var _this = this;\n\n  var companyId = useSelector(function (state) {\n    return state.auth.company;\n  }, shallowEqual);\n  var userId = useSelector(function (state) {\n    return state.auth.user.userId;\n  }, shallowEqual);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      distributors = _useState2[0],\n      setDistributors = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      distributor = _useState4[0],\n      setDistributor = _useState4[1]; // DATE COMPONENT USE STATE\n\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      inputsDate = _useState6[0],\n      setInputsDate = _useState6[1];\n\n  var _useState7 = useState(\"Date\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dateType = _useState8[0],\n      setDateType = _useState8[1];\n\n  useEffect(function () {\n    document.getElementById('pills-payment-collection-reports-tab').classList.add('active');\n    document.getElementById('pills-acknowledge-report-tab').classList.add('active'); //setDistributor({})\n  }, []);\n  useEffect(function () {\n    getAllDistributorList(userId, companyId);\n  }, [userId, companyId]);\n\n  var getAllDistributorList = function getAllDistributorList(userId, companyId) {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/distributor/list/\").concat(userId, \"/\").concat(companyId, \"/\");\n    axios.get(URL).then(function (response) {\n      setDistributors(response.data.data);\n    });\n  };\n\n  var handleChangeDistributor = function handleChangeDistributor(row) {\n    setDistributor(row);\n  };\n\n  var validate = function validate() {\n    if (Object.keys(distributor || {}).length === 0) {\n      showError('Please Select Distributor!');\n      return false;\n    }\n\n    return true;\n  };\n\n  var handleDownloadChange = function handleDownloadChange() {\n    if (!validate()) {\n      return false;\n    }\n\n    var queryParams = '?companyId=' + companyId;\n    queryParams += '&distributorId=' + distributor.distributorId;\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/reports/acknowledged-invoice-report\") + queryParams;\n    axios.get(URL, {\n      responseType: 'blob'\n    }).then(function (response) {\n      var url = window.URL.createObjectURL(new Blob([response.data]));\n      console.log(response.data);\n      var link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', \"AcknowledgedInvoiceReport.pdf\");\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }).catch(function (err) {\n      showError();\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CollectionBreadCrum, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CollectionTodaySales, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ReportSubTabs, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(CommonDateComponent, {\n    inputs: inputsDate,\n    setInputs: setInputsDate,\n    type: dateType,\n    setType: setDateType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    id: \"distributorId\",\n    name: \"distributorId\",\n    options: distributors,\n    getOptionLabel: function getOptionLabel(option) {\n      return option.distributorName;\n    },\n    onChange: function onChange(event, newValue) {\n      handleChangeDistributor(newValue);\n    },\n    renderInput: function renderInput(params) {\n      return /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n        label: \"Select Distributor*\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 45\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"mt-5\",\n    id: \"gotItBtn\",\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleDownloadChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, \"Download\"))))));\n}","map":{"version":3,"names":["React","useEffect","useState","Card","CardBody","shallowEqual","useSelector","CollectionBreadCrum","CollectionTodaySales","Button","CommonDateComponent","axios","Autocomplete","TextField","ReportSubTabs","showError","AcknowledgeReport","props","companyId","state","auth","company","userId","user","distributors","setDistributors","distributor","setDistributor","inputsDate","setInputsDate","dateType","setDateType","document","getElementById","classList","add","getAllDistributorList","URL","process","env","REACT_APP_API_URL","get","then","response","data","handleChangeDistributor","row","validate","Object","keys","length","handleDownloadChange","queryParams","distributorId","responseType","url","window","createObjectURL","Blob","console","log","link","createElement","href","setAttribute","body","appendChild","click","removeChild","catch","err","option","distributorName","event","newValue","params"],"sources":["/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/SalesCollection/PaymentCollection/report/AcknowledgeReport.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, CardBody } from \"../../../../../_metronic/_partials/controls\";\nimport { shallowEqual, useSelector } from \"react-redux\";\nimport CollectionBreadCrum from '../common/CollectionBreadCrum';\nimport CollectionTodaySales from \"../common/CollectionTodaySales\";\nimport Button from '@material-ui/core/Button';\nimport CommonDateComponent from '../../../Common/CommonDateComponent';\nimport axios from \"axios\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport { TextField } from \"@material-ui/core\";\nimport ReportSubTabs from '../common/ReportSubTabs';\nimport { showError } from \"../../../../pages/Alert\";\n\nexport function AcknowledgeReport(props) {\n    const companyId = useSelector((state) => state.auth.company, shallowEqual);\n    const userId = useSelector((state) => state.auth.user.userId, shallowEqual);\n    const [distributors, setDistributors] = useState([]);\n    const [distributor, setDistributor] = useState({});\n\n    // DATE COMPONENT USE STATE\n    const [inputsDate, setInputsDate] = useState({});\n    const [dateType, setDateType] = useState(\"Date\");\n\n    useEffect(() => {\n        document.getElementById('pills-payment-collection-reports-tab').classList.add('active');\n        document.getElementById('pills-acknowledge-report-tab').classList.add('active');\n        //setDistributor({})\n    }, []);\n\n    useEffect(() => {\n        getAllDistributorList(userId, companyId)\n    }, [userId, companyId]);\n\n    const getAllDistributorList = (userId, companyId) => {\n        const URL = `${process.env.REACT_APP_API_URL}/api/distributor/list/${userId}/${companyId}/`;\n        axios.get(URL).then(response => {\n            setDistributors(response.data.data);\n        });\n    }\n\n    const handleChangeDistributor = (row) => {\n        setDistributor(row)\n    }\n\n    const validate = () => {\n        if (Object.keys(distributor || {}).length === 0) {\n            showError('Please Select Distributor!');\n            return false;\n        }\n        return true;\n    }\n\n    const handleDownloadChange = () => {\n        if (!validate()) {\n            return false;\n        }\n        let queryParams = '?companyId=' + companyId;\n        queryParams += '&distributorId=' + distributor.distributorId;\n    \n        const URL = `${process.env.REACT_APP_API_URL}/api/reports/acknowledged-invoice-report` + queryParams;\n        axios.get(URL, { responseType: 'blob' }).then(response => {\n            const url = window.URL.createObjectURL(new Blob([response.data]));\n            console.log(response.data)\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download', \"AcknowledgedInvoiceReport.pdf\");\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n\n        }).catch(err => {\n            showError();\n        });\n    }\n\n    return (\n        <>\n            {/* BREAD CRUM ROW */}\n            <CollectionBreadCrum />\n            {/* TODAY SALE ROW */}\n            <CollectionTodaySales />\n\n            <div>\n                <ReportSubTabs />\n            </div>\n\n            <div>\n                <Card>\n                    <CardBody>\n\n                        <div className='row'>\n                            <div className='col-xl-6'>\n                                {/* DATE COMPONENT */}\n                                <CommonDateComponent\n                                    inputs={inputsDate}\n                                    setInputs={setInputsDate}\n                                    type={dateType}\n                                    setType={setDateType}\n                                />\n                                <div>\n                                    <Autocomplete\n                                        id=\"distributorId\"\n                                        name=\"distributorId\"\n                                        options={distributors}\n                                        getOptionLabel={(option) => option.distributorName}\n                                        onChange={(event, newValue) => {\n                                            handleChangeDistributor(newValue)\n                                        }}\n                                        renderInput={(params) => (\n                                            <TextField {...params} label=\"Select Distributor*\" />\n                                        )}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"float-right\">\n                            <Button className=\"mt-5\" id=\"gotItBtn\" variant=\"contained\" color=\"primary\" onClick={handleDownloadChange}>\n                                Download\n                            </Button>\n                        </div>\n                    </CardBody>\n                </Card>\n            </div>\n        </>\n    );\n}"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,6CAA/B;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,aAA1C;AACA,OAAOC,mBAAP,MAAgC,+BAAhC;AACA,OAAOC,oBAAP,MAAiC,gCAAjC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,mBAAP,MAAgC,qCAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,SAASC,SAAT,QAA0B,yBAA1B;AAEA,OAAO,SAASC,iBAAT,CAA2BC,KAA3B,EAAkC;EAAA;;EACrC,IAAMC,SAAS,GAAGZ,WAAW,CAAC,UAACa,KAAD;IAAA,OAAWA,KAAK,CAACC,IAAN,CAAWC,OAAtB;EAAA,CAAD,EAAgChB,YAAhC,CAA7B;EACA,IAAMiB,MAAM,GAAGhB,WAAW,CAAC,UAACa,KAAD;IAAA,OAAWA,KAAK,CAACC,IAAN,CAAWG,IAAX,CAAgBD,MAA3B;EAAA,CAAD,EAAoCjB,YAApC,CAA1B;;EACA,gBAAwCH,QAAQ,CAAC,EAAD,CAAhD;EAAA;EAAA,IAAOsB,YAAP;EAAA,IAAqBC,eAArB;;EACA,iBAAsCvB,QAAQ,CAAC,EAAD,CAA9C;EAAA;EAAA,IAAOwB,WAAP;EAAA,IAAoBC,cAApB,iBAJqC,CAMrC;;;EACA,iBAAoCzB,QAAQ,CAAC,EAAD,CAA5C;EAAA;EAAA,IAAO0B,UAAP;EAAA,IAAmBC,aAAnB;;EACA,iBAAgC3B,QAAQ,CAAC,MAAD,CAAxC;EAAA;EAAA,IAAO4B,QAAP;EAAA,IAAiBC,WAAjB;;EAEA9B,SAAS,CAAC,YAAM;IACZ+B,QAAQ,CAACC,cAAT,CAAwB,sCAAxB,EAAgEC,SAAhE,CAA0EC,GAA1E,CAA8E,QAA9E;IACAH,QAAQ,CAACC,cAAT,CAAwB,8BAAxB,EAAwDC,SAAxD,CAAkEC,GAAlE,CAAsE,QAAtE,EAFY,CAGZ;EACH,CAJQ,EAIN,EAJM,CAAT;EAMAlC,SAAS,CAAC,YAAM;IACZmC,qBAAqB,CAACd,MAAD,EAASJ,SAAT,CAArB;EACH,CAFQ,EAEN,CAACI,MAAD,EAASJ,SAAT,CAFM,CAAT;;EAIA,IAAMkB,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACd,MAAD,EAASJ,SAAT,EAAuB;IACjD,IAAMmB,GAAG,aAAMC,OAAO,CAACC,GAAR,CAAYC,iBAAlB,mCAA4DlB,MAA5D,cAAsEJ,SAAtE,MAAT;IACAP,KAAK,CAAC8B,GAAN,CAAUJ,GAAV,EAAeK,IAAf,CAAoB,UAAAC,QAAQ,EAAI;MAC5BlB,eAAe,CAACkB,QAAQ,CAACC,IAAT,CAAcA,IAAf,CAAf;IACH,CAFD;EAGH,CALD;;EAOA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,GAAD,EAAS;IACrCnB,cAAc,CAACmB,GAAD,CAAd;EACH,CAFD;;EAIA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;IACnB,IAAIC,MAAM,CAACC,IAAP,CAAYvB,WAAW,IAAI,EAA3B,EAA+BwB,MAA/B,KAA0C,CAA9C,EAAiD;MAC7CnC,SAAS,CAAC,4BAAD,CAAT;MACA,OAAO,KAAP;IACH;;IACD,OAAO,IAAP;EACH,CAND;;EAQA,IAAMoC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;IAC/B,IAAI,CAACJ,QAAQ,EAAb,EAAiB;MACb,OAAO,KAAP;IACH;;IACD,IAAIK,WAAW,GAAG,gBAAgBlC,SAAlC;IACAkC,WAAW,IAAI,oBAAoB1B,WAAW,CAAC2B,aAA/C;IAEA,IAAMhB,GAAG,GAAG,UAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAf,gDAA6EY,WAAzF;IACAzC,KAAK,CAAC8B,GAAN,CAAUJ,GAAV,EAAe;MAAEiB,YAAY,EAAE;IAAhB,CAAf,EAAyCZ,IAAzC,CAA8C,UAAAC,QAAQ,EAAI;MACtD,IAAMY,GAAG,GAAGC,MAAM,CAACnB,GAAP,CAAWoB,eAAX,CAA2B,IAAIC,IAAJ,CAAS,CAACf,QAAQ,CAACC,IAAV,CAAT,CAA3B,CAAZ;MACAe,OAAO,CAACC,GAAR,CAAYjB,QAAQ,CAACC,IAArB;MACA,IAAMiB,IAAI,GAAG7B,QAAQ,CAAC8B,aAAT,CAAuB,GAAvB,CAAb;MACAD,IAAI,CAACE,IAAL,GAAYR,GAAZ;MACAM,IAAI,CAACG,YAAL,CAAkB,UAAlB,EAA8B,+BAA9B;MACAhC,QAAQ,CAACiC,IAAT,CAAcC,WAAd,CAA0BL,IAA1B;MACAA,IAAI,CAACM,KAAL;MACAnC,QAAQ,CAACiC,IAAT,CAAcG,WAAd,CAA0BP,IAA1B;IAEH,CAVD,EAUGQ,KAVH,CAUS,UAAAC,GAAG,EAAI;MACZvD,SAAS;IACZ,CAZD;EAaH,CArBD;;EAuBA,oBACI,uDAEI,oBAAC,mBAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,eAII,oBAAC,oBAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAJJ,eAMI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,aAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,CANJ,eAUI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,IAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,QAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAEI;IAAK,SAAS,EAAC,KAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAK,SAAS,EAAC,UAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAEI,oBAAC,mBAAD;IACI,MAAM,EAAEa,UADZ;IAEI,SAAS,EAAEC,aAFf;IAGI,IAAI,EAAEC,QAHV;IAII,OAAO,EAAEC,WAJb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,eAQI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,YAAD;IACI,EAAE,EAAC,eADP;IAEI,IAAI,EAAC,eAFT;IAGI,OAAO,EAAEP,YAHb;IAII,cAAc,EAAE,wBAAC+C,MAAD;MAAA,OAAYA,MAAM,CAACC,eAAnB;IAAA,CAJpB;IAKI,QAAQ,EAAE,kBAACC,KAAD,EAAQC,QAAR,EAAqB;MAC3B7B,uBAAuB,CAAC6B,QAAD,CAAvB;IACH,CAPL;IAQI,WAAW,EAAE,qBAACC,MAAD;MAAA,oBACT,oBAAC,SAAD,oBAAeA,MAAf;QAAuB,KAAK,EAAC,qBAA7B;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GADS;IAAA,CARjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,CARJ,CADJ,CAFJ,eA4BI;IAAK,SAAS,EAAC,aAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,MAAD;IAAQ,SAAS,EAAC,MAAlB;IAAyB,EAAE,EAAC,UAA5B;IAAuC,OAAO,EAAC,WAA/C;IAA2D,KAAK,EAAC,SAAjE;IAA2E,OAAO,EAAExB,oBAApF;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,cADJ,CA5BJ,CADJ,CADJ,CAVJ,CADJ;AAmDH"},"metadata":{},"sourceType":"module"}