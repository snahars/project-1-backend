{"ast":null,"code":"import _toConsumableArray from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/ApprovalPath/authorization-feature/AuthorizationFeature.js\";\nimport { Card } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { CardBody } from \"../../../../_metronic/_partials/controls\";\nimport SVG from \"react-inlinesvg\";\nimport { toAbsoluteUrl } from \"../../../../_metronic/_helpers\";\nimport ApprovalPathBreadCrum from \"../bread-crum/ApprovalPathBreadCrum\";\nimport { showError, showSuccess } from \"../../../pages/Alert\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nexport default function AuthorizationFeature(props) {\n  var _this = this;\n\n  var history = useHistory();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      company = _useState2[0],\n      setCompany = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      approvalFeatureList = _useState4[0],\n      setApprovalFeatureList = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      approvalList = _useState6[0],\n      setApprovalList = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      companyId = _useState8[0],\n      setCompanyId = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      approvalFeature = _useState10[0],\n      setApprovalFeature = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      data = _useState12[0],\n      setData = _useState12[1];\n\n  var _useState13 = useState([{\n    id: '',\n    approvalName: '',\n    approvalStepId: '',\n    level: ''\n  }]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      approvalObj = _useState14[0],\n      setApprovalObj = _useState14[1];\n\n  var addApprovalFields = function addApprovalFields(i) {\n    setApprovalObj([].concat(_toConsumableArray(approvalObj), [{\n      id: '',\n      approvalName: '',\n      approvalStepId: '',\n      level: ''\n    }]));\n  };\n\n  useEffect(function () {\n    getCompanyList();\n    getAllApprovalFeature();\n    getAllApprovalStep();\n\n    if (props.location.state !== undefined) {\n      //console.log(props.location.state.data);\n      setData(props.location.state.data);\n      setAuthorizationFeatureForUpdate(props.location.state.data);\n    }\n  }, []);\n\n  var setAuthorizationFeatureForUpdate = function setAuthorizationFeatureForUpdate(data) {\n    document.getElementById(\"companyId\").disabled = true;\n    document.getElementById(\"featureId\").disabled = true;\n    var tempArray = [];\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/approval-step-feature-map/get-all-by-company-id-and-approval-feature/\").concat(data.companyId, \"/\").concat(data.feature);\n    axios.get(URL).then(function (response) {\n      if (response.data.success === true) {\n        if (response.data.data.length > 0) {\n          for (var i = 0; i < response.data.data.length; i++) {\n            tempArray.push({\n              id: '',\n              approvalName: response.data.data[i].approvalStep.name,\n              approvalStepId: response.data.data[i].approvalStep.id,\n              level: i\n            });\n          }\n\n          setApprovalObj(tempArray);\n        }\n      } else {\n        showError(response.data.message);\n      }\n    }).catch(function (err) {\n      showError(err);\n    });\n    setCompanyId(data.companyId);\n    setApprovalFeature(data.feature); //setApprovalObj();\n  };\n\n  var getCompanyList = function getCompanyList() {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/organization/companies-by-login-user-organization\");\n    axios.get(URL).then(function (response) {\n      setCompany(response.data.data);\n    });\n  };\n\n  var getAllApprovalFeature = function getAllApprovalFeature() {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/constants/approval-feature\");\n    axios.get(URL).then(function (response) {\n      //console.log(response.data)\n      setApprovalFeatureList(response.data.data);\n    });\n  };\n\n  var getAllApprovalStep = function getAllApprovalStep() {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/approval-step\");\n    axios.get(URL).then(function (response) {\n      //console.log(response.data.data)\n      setApprovalList(response.data.data);\n    });\n  };\n\n  var removeApproval = function removeApproval(i) {\n    var newFormValues = _toConsumableArray(approvalObj);\n\n    newFormValues.splice(i, 1);\n    newFormValues.map(function (obj, index) {\n      obj.level = index;\n    });\n    setApprovalObj(newFormValues);\n  };\n\n  var handleBackToListPage = function handleBackToListPage() {\n    history.push('/approval-path/authorization-feature');\n  };\n\n  var handleCompanyChange = function handleCompanyChange(e, i) {\n    var companyId = e.target.value;\n    setCompanyId(companyId);\n  };\n\n  var handleFeatureChange = function handleFeatureChange(e, i) {\n    var featureString = e.target.value;\n    setApprovalFeature(featureString);\n  };\n\n  var handleChange = function handleChange(e, i) {\n    var getId = document.getElementById(\"approvalStepId-\" + i);\n    var getApprovalName = getId.options[getId.selectedIndex].text;\n\n    if (approvalObj.length > 1) {\n      var temp = _toConsumableArray(approvalObj);\n\n      var index = temp.findIndex(function (obj) {\n        return obj.approvalStepId === Number(e.target.value);\n      });\n\n      if (index > -1) {\n        showError(\"This approval step already used\");\n        return;\n      } else {\n        var newFormValues = _toConsumableArray(approvalObj);\n\n        newFormValues[i][e.target.name] = e.target.value;\n        newFormValues[i].approvalName = getApprovalName;\n        newFormValues[i].level = i;\n        setApprovalObj(newFormValues);\n      }\n    } else {\n      var _newFormValues = _toConsumableArray(approvalObj);\n\n      _newFormValues[i][e.target.name] = e.target.value;\n      _newFormValues[i].approvalName = getApprovalName;\n      _newFormValues[i].level = i;\n      setApprovalObj(_newFormValues);\n    }\n  };\n\n  var createApprovalFeature = function createApprovalFeature() {\n    //alert('create..'); return;\n    if (!validate()) {\n      return false;\n    }\n\n    var obj = {};\n    obj.companyId = companyId;\n    obj.approvalFeature = approvalFeature;\n    obj.approvalStepFeatureMapDtoList = approvalObj; // console.log(obj)\n\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/approval-step-feature-map/create-all\");\n    axios.post(URL, JSON.stringify(obj), {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      if (response.data.success === true) {\n        setApprovalObj([{\n          id: '',\n          approvalName: '',\n          approvalStepId: '',\n          level: ''\n        }]);\n        document.getElementById('companyId').value = \"\";\n        document.getElementById('featureId').value = \"\";\n        showSuccess(response.data.message);\n      } else {\n        showError(response.data.message);\n      }\n    }).catch(function (err) {\n      showError(err);\n    });\n  };\n\n  var updateApprovalFeature = function updateApprovalFeature() {\n    if (!validate()) {\n      return false;\n    }\n\n    var obj = {};\n    obj.companyId = companyId;\n    obj.approvalFeature = approvalFeature;\n    obj.approvalStepFeatureMapDtoList = approvalObj; //console.log(obj);\n\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/approval-step-feature-map/update-all\");\n    axios.post(URL, JSON.stringify(obj), {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      if (response.data.success === true) {\n        showSuccess(response.data.message);\n        history.push('/approval-path/authorization-feature');\n      } else {\n        showError(response.data.message);\n      }\n    }).catch(function (err) {\n      showError(err);\n    });\n  };\n\n  var validate = function validate() {\n    if (!companyId) {\n      showError('Company is required.');\n      return false;\n    }\n\n    if (!approvalFeature) {\n      showError('Feature is required.');\n      return false;\n    }\n\n    for (var i = 0; i < approvalObj.length; i++) {\n      if (!approvalObj[i].approvalStepId) {\n        showError('Approval Step Name is required.');\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ApprovalPathBreadCrum, {\n    menuTitle: \"Authorization Feature\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: handleBackToListPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"bi bi-arrow-left-short sales-booking-view-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 41\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 level-title text-center mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"display-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 29\n    }\n  }, \"Authorization Feature\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"display-inline-block w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-4 mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"dark-gray-color\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 41\n    }\n  }, \"Company \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 84\n    }\n  }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"companyId\",\n    className: \"form-control\",\n    name: \"companyId\",\n    value: companyId || \"\",\n    onChange: handleCompanyChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 45\n    }\n  }, \"Please select Company\"), company.map(function (c) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: c.id,\n      value: c.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 53\n      }\n    }, c.name);\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"display-inline-block w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-4 mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"dark-gray-color\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 41\n    }\n  }, \"Feature \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 84\n    }\n  }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"featureId\",\n    className: \"form-control\",\n    name: \"featureId\",\n    value: approvalFeature || \"\",\n    onChange: handleFeatureChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 45\n    }\n  }, \"Please select Feature\"), approvalFeatureList.map(function (af) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: af.code,\n      value: af.code,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 53\n      }\n    }, af.name);\n  }))))))), approvalObj.map(function (element, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-xl-12 float-right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 29\n      }\n    }, index === 0 ? /*#__PURE__*/React.createElement(\"button\", {\n      id: \"more-btn-id\",\n      type: \"button\",\n      className: \"btn float-right\",\n      onClick: function onClick() {\n        return addApprovalFields(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(SVG, {\n      src: toAbsoluteUrl(\"/media/svg/icons/project-svg/blue-add.svg\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 45\n      }\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn\",\n      onClick: function onClick() {\n        return removeApproval(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(SVG, {\n      src: toAbsoluteUrl(\"/media/svg/icons/project-svg/red-delete.svg\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 49\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"more-btn-id\",\n      type: \"button\",\n      className: \"btn\",\n      onClick: function onClick() {\n        return addApprovalFields(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(SVG, {\n      src: toAbsoluteUrl(\"/media/svg/icons/project-svg/blue-add.svg\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 49\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-12 guarantee-cheque-div\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 33\n      }\n    }, \"Approval to(\", index + 1, \")\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-12 mt-5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-6\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"level-title\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 41\n      }\n    }, \"Approval Step Name \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-danger \",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 91\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"approvalStepId-\" + index,\n      className: \"form-control\",\n      name: \"approvalStepId\",\n      value: element.approvalStepId || \"\",\n      onChange: function onChange(e) {\n        return handleChange(e, index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 45\n      }\n    }, \"Select Approval Steps\"), approvalList.map(function (approval, index) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: approval.id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 53\n        }\n      }, approval.name);\n    }))))));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-12 text-center mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    id: \"save-btn-id\",\n    type: \"button\",\n    className: \"btn bg-primary text-white float-right\",\n    onClick: data ? updateApprovalFeature : createApprovalFeature,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 25\n    }\n  }, data ? 'Update' : 'Save')))));\n}","map":{"version":3,"names":["Card","React","useState","useEffect","CardBody","SVG","toAbsoluteUrl","ApprovalPathBreadCrum","showError","showSuccess","useHistory","axios","AuthorizationFeature","props","history","company","setCompany","approvalFeatureList","setApprovalFeatureList","approvalList","setApprovalList","companyId","setCompanyId","approvalFeature","setApprovalFeature","data","setData","id","approvalName","approvalStepId","level","approvalObj","setApprovalObj","addApprovalFields","i","getCompanyList","getAllApprovalFeature","getAllApprovalStep","location","state","undefined","setAuthorizationFeatureForUpdate","document","getElementById","disabled","tempArray","URL","process","env","REACT_APP_API_URL","feature","get","then","response","success","length","push","approvalStep","name","message","catch","err","removeApproval","newFormValues","splice","map","obj","index","handleBackToListPage","handleCompanyChange","e","target","value","handleFeatureChange","featureString","handleChange","getId","getApprovalName","options","selectedIndex","text","temp","findIndex","Number","createApprovalFeature","validate","approvalStepFeatureMapDtoList","post","JSON","stringify","headers","updateApprovalFeature","c","af","code","element","approval"],"sources":["/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/ApprovalPath/authorization-feature/AuthorizationFeature.js"],"sourcesContent":["import { Card } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { CardBody } from \"../../../../_metronic/_partials/controls\";\nimport SVG from \"react-inlinesvg\";\nimport { toAbsoluteUrl } from \"../../../../_metronic/_helpers\";\nimport ApprovalPathBreadCrum from \"../bread-crum/ApprovalPathBreadCrum\";\nimport { showError, showSuccess } from \"../../../pages/Alert\"\nimport { useHistory } from \"react-router-dom\"\nimport axios from \"axios\";\nexport default function AuthorizationFeature(props) {\n    let history = useHistory();\n    const [company, setCompany] = useState([]);\n    const [approvalFeatureList, setApprovalFeatureList] = useState([]);\n    const [approvalList, setApprovalList] = useState([]);\n    const [companyId, setCompanyId] = useState(\"\");\n    const [approvalFeature, setApprovalFeature] = useState(\"\");\n    const [data, setData] = useState(\"\");\n\n    const [approvalObj, setApprovalObj] = useState([\n        {\n            id: '',\n            approvalName: '',\n            approvalStepId: '',\n            level: '',\n        },\n    ]);\n    const addApprovalFields = (i) => {\n        setApprovalObj([...approvalObj, {\n            id: '',\n            approvalName: '',\n            approvalStepId: '',\n            level: '',\n        }])\n    }\n    useEffect(() => {\n        getCompanyList();\n        getAllApprovalFeature();\n        getAllApprovalStep();\n        if (props.location.state !== undefined) {\n            //console.log(props.location.state.data);\n            setData(props.location.state.data);\n            setAuthorizationFeatureForUpdate(props.location.state.data);\n        }\n    }, [])\n    const setAuthorizationFeatureForUpdate = (data) => {\n        document.getElementById(\"companyId\").disabled = true;\n        document.getElementById(\"featureId\").disabled = true;\n        let tempArray = [];\n        const URL = `${process.env.REACT_APP_API_URL}/api/approval-step-feature-map/get-all-by-company-id-and-approval-feature/${data.companyId}/${data.feature}`;\n        axios.get(URL).then(response => {\n            if (response.data.success === true) {\n\n                if (response.data.data.length > 0) {\n\n                    for (let i = 0; i < response.data.data.length; i++) {\n                        tempArray.push({\n                            id: '',\n                            approvalName: response.data.data[i].approvalStep.name,\n                            approvalStepId: response.data.data[i].approvalStep.id,\n                            level: i,\n                        })\n                    }\n                    setApprovalObj(tempArray);\n                }\n\n            } else {\n                showError(response.data.message);\n            }\n        }).catch(err => {\n            showError(err);\n        });\n        setCompanyId(data.companyId);\n        setApprovalFeature(data.feature);\n        //setApprovalObj();\n    }\n\n    const getCompanyList = () => {\n        const URL = `${process.env.REACT_APP_API_URL}/api/organization/companies-by-login-user-organization`;\n        axios.get(URL).then(response => {\n            setCompany(response.data.data);\n        });\n    }\n    const getAllApprovalFeature = () => {\n        const URL = `${process.env.REACT_APP_API_URL}/api/constants/approval-feature`;\n        axios.get(URL).then(response => {\n            //console.log(response.data)\n            setApprovalFeatureList(response.data.data)\n        });\n    }\n    const getAllApprovalStep = () => {\n        const URL = `${process.env.REACT_APP_API_URL}/api/approval-step`;\n        axios.get(URL).then(response => {\n            //console.log(response.data.data)\n            setApprovalList(response.data.data)\n        });\n    }\n\n    const removeApproval = (i) => {\n        let newFormValues = [...approvalObj];\n        newFormValues.splice(i, 1);\n        newFormValues.map((obj, index) => {\n            obj.level = index;\n        })\n        setApprovalObj(newFormValues)\n\n    }\n    const handleBackToListPage = () => {\n        history.push('/approval-path/authorization-feature');\n    }\n\n    const handleCompanyChange = (e, i) => {\n        const companyId = e.target.value;\n        setCompanyId(companyId);\n    }\n    const handleFeatureChange = (e, i) => {\n        const featureString = e.target.value;\n        setApprovalFeature(featureString);\n    }\n\n    const handleChange = (e, i) => {\n        const getId = document.getElementById(\"approvalStepId-\" + i)\n        const getApprovalName = getId.options[getId.selectedIndex].text;\n        if (approvalObj.length > 1) {\n            const temp = [...approvalObj]\n            const index = temp.findIndex((obj) => obj.approvalStepId === Number(e.target.value))\n            if (index > -1) {\n                showError(\"This approval step already used\");\n                return;\n            } else {\n                let newFormValues = [...approvalObj];\n                newFormValues[i][e.target.name] = e.target.value;\n                newFormValues[i].approvalName = getApprovalName;\n                newFormValues[i].level = i;\n                setApprovalObj(newFormValues);\n            }\n        } else {\n            let newFormValues = [...approvalObj];\n            newFormValues[i][e.target.name] = e.target.value;\n            newFormValues[i].approvalName = getApprovalName;\n            newFormValues[i].level = i;\n            setApprovalObj(newFormValues);\n        }\n    }\n\n    const createApprovalFeature = () => {//alert('create..'); return;\n        if (!validate()) {\n            return false;\n        }\n\n        let obj = {}\n\n        obj.companyId = companyId;\n        obj.approvalFeature = approvalFeature;\n        obj.approvalStepFeatureMapDtoList = approvalObj;\n        // console.log(obj)\n\n        const URL = `${process.env.REACT_APP_API_URL}/api/approval-step-feature-map/create-all`;\n        axios.post(URL, JSON.stringify(obj), { headers: { \"Content-Type\": \"application/json\" } }).then(response => {\n            if (response.data.success === true) {\n                setApprovalObj([\n                    {\n                        id: '',\n                        approvalName: '',\n                        approvalStepId: '',\n                        level: '',\n                    },\n                ]);\n                document.getElementById('companyId').value = \"\";\n                document.getElementById('featureId').value = \"\";\n                showSuccess(response.data.message);\n            } else {\n                showError(response.data.message);\n            }\n        }).catch(err => {\n            showError(err);\n        });\n    }\n\n    const updateApprovalFeature = () => {\n        if (!validate()) {\n            return false;\n        }\n        let obj = {}\n\n        obj.companyId = companyId;\n        obj.approvalFeature = approvalFeature;\n        obj.approvalStepFeatureMapDtoList = approvalObj;\n        //console.log(obj);\n\n        const URL = `${process.env.REACT_APP_API_URL}/api/approval-step-feature-map/update-all`;\n        axios.post(URL, JSON.stringify(obj), { headers: { \"Content-Type\": \"application/json\" } }).then(response => {\n            if (response.data.success === true) {\n                showSuccess(response.data.message);\n                history.push('/approval-path/authorization-feature');\n            } else {\n                showError(response.data.message);\n            }\n        }).catch(err => {\n            showError(err);\n        });\n    }\n\n    const validate = () => {\n\n        if (!companyId) {\n            showError('Company is required.');\n            return false;\n        }\n        if (!approvalFeature) {\n            showError('Feature is required.');\n            return false;\n        }\n        for (let i = 0; i < approvalObj.length; i++) {\n            if (!approvalObj[i].approvalStepId) {\n                showError('Approval Step Name is required.');\n                return false;\n            }\n        }\n        return true;\n    }\n    return (\n        <>\n            {/* BREAD CRUM ROW */}\n            <ApprovalPathBreadCrum menuTitle=\"Authorization Feature\" />\n            <Card>\n                <CardBody>\n                    {/* BACK AND TITLE ROW */}\n                    <div className=\"row\">\n                        <div className=\"col-4\">\n                            <span>\n                                <button className='btn' onClick={handleBackToListPage}>\n                                    <strong>\n                                        <i className=\"bi bi-arrow-left-short sales-booking-view-icon\"></i>\n                                    </strong>\n                                </button>\n                            </span>\n                        </div>\n                        <div className=\"col-4 level-title text-center mt-3\">\n                            <strong className=\"display-inline-block\">Authorization Feature</strong>\n                        </div>\n                    </div>\n                    <div className=\"row mt-5\">\n                        <div className=\"col-xl-6\">\n                            {/* COMPANY DROPDOWN */}\n                            <div className=\"display-inline-block w-100\">\n                                <div className=\"row\">\n                                    <div className=\"col-xl-4 mt-3\">\n                                        <label className=\"dark-gray-color\">Company <span className=\"text-danger\">*</span></label>\n                                    </div>\n                                    <div className=\"col-xl-8\">\n                                        <select id=\"companyId\" className='form-control' name=\"companyId\"\n                                            value={companyId || \"\"}\n                                            onChange={handleCompanyChange}\n                                        >\n                                            <option value=\"\">Please select Company</option>\n                                            {\n                                                company.map((c) => (\n                                                    <option key={c.id} value={c.id}>{c.name}</option>\n                                                ))}\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"col-xl-6\">\n                            {/* FEATURE DROPDOWN */}\n                            <div className=\"display-inline-block w-100\">\n                                <div className=\"row\">\n                                    <div className=\"col-xl-4 mt-3\">\n                                        <label className=\"dark-gray-color\">Feature <span className=\"text-danger \">*</span></label>\n                                    </div>\n                                    <div className=\"col-xl-8\">\n                                        <select id=\"featureId\" className='form-control' name=\"featureId\"\n                                            value={approvalFeature || \"\"}\n                                            onChange={handleFeatureChange}\n                                        >\n                                            <option value=\"\">Please select Feature</option>\n                                            {\n                                                approvalFeatureList.map((af) => (\n                                                    <option key={af.code} value={af.code}>{af.name}</option>\n                                                ))}\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {approvalObj.map((element, index) => (\n                        <div className=\"row\" key={index}>\n                            <div className=\"form-group col-xl-12 float-right\">\n                                {\n                                    index === 0 ?\n                                        <button\n                                            id=\"more-btn-id\"\n                                            type=\"button\"\n                                            className=\"btn float-right\"\n                                            onClick={() => addApprovalFields(index)}\n                                        >\n                                            <SVG src={toAbsoluteUrl(\"/media/svg/icons/project-svg/blue-add.svg\")} />\n                                        </button>\n                                        :\n                                        <div className=\"text-right\">\n                                            <button\n                                                type=\"button\"\n                                                className=\"btn\"\n                                                onClick={() => removeApproval(index)}\n                                            >\n                                                <SVG src={toAbsoluteUrl(\"/media/svg/icons/project-svg/red-delete.svg\")} />\n                                            </button>\n                                            <button\n                                                id=\"more-btn-id\"\n                                                type=\"button\"\n                                                className=\"btn\"\n                                                onClick={() => addApprovalFields(index)}\n                                            >\n                                                <SVG src={toAbsoluteUrl(\"/media/svg/icons/project-svg/blue-add.svg\")} />\n                                            </button>\n                                        </div>\n\n                                }\n                            </div>\n                            <div className='col-xl-12 guarantee-cheque-div'>\n                                <span>Approval to({index + 1})</span>\n                            </div>\n                            <div className=\"col-xl-12 mt-5\">\n                                <div className=\"row\">\n                                    <div className=\"col-xl-6\">\n                                        <label className='level-title'>Approval Step Name <span className=\"text-danger \">*</span></label>\n                                        <select id={\"approvalStepId-\" + index} className=\"form-control\" name=\"approvalStepId\" value={element.approvalStepId || \"\"} onChange={(e) => handleChange(e, index)}>\n                                            <option value=\"\">Select Approval Steps</option>\n                                            {\n                                                approvalList.map((approval, index) => (\n                                                    <option value={approval.id}>{approval.name}</option>\n                                                ))\n                                            }\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                    <div className='col-xl-12 text-center mb-5'>\n                        <button\n                            id=\"save-btn-id\"\n                            type=\"button\"\n                            className=\"btn bg-primary text-white float-right\"\n                            onClick={data ? updateApprovalFeature : createApprovalFeature}\n                        >\n                            {data ? 'Update' : 'Save'}\n                        </button>\n                    </div>\n                </CardBody>\n            </Card>\n        </>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}