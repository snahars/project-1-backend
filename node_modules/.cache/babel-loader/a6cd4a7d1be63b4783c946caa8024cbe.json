{"ast":null,"code":"var _jsxFileName = \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/ECommerce/pages/products/product-remarks/remark-edit-dialog/RemarkEditDialog.js\";\nimport React, { useEffect, useMemo } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport * as actions from \"../../../../_redux/remarks/remarksActions\";\nimport { RemarkEditDialogHeader } from \"./RemarkEditDialogHeader\";\nimport { RemarkEditForm } from \"./RemarkEditForm\";\nimport { useRemarksUIContext } from \"../RemarksUIContext\";\n\nfunction getFormattedDate(date) {\n  if (typeof date === \"string\") {\n    return date;\n  }\n\n  var year = date.getFullYear();\n  var month = (1 + date.getMonth()).toString();\n  month = month.length > 1 ? month : \"0\" + month;\n  var day = date.getDate().toString();\n  day = day.length > 1 ? day : \"0\" + day;\n  return month + \"/\" + day + \"/\" + year;\n}\n\nexport function RemarkEditDialog() {\n  // Remarks UI Context\n  var remarksUIContext = useRemarksUIContext();\n  var remarksUIProps = useMemo(function () {\n    return {\n      id: remarksUIContext.selectedId,\n      setIds: remarksUIContext.setIds,\n      productId: remarksUIContext.productId,\n      queryParams: remarksUIContext.queryParams,\n      showEditRemarkDialog: remarksUIContext.showEditRemarkDialog,\n      closeEditRemarkDialog: remarksUIContext.closeEditRemarkDialog,\n      initRemark: remarksUIContext.initRemark\n    };\n  }, [remarksUIContext]); // Remarks Redux state\n\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return {\n      actionsLoading: state.remarks.actionsLoading,\n      remarkForEdit: state.remarks.remarkForEdit\n    };\n  }, shallowEqual),\n      actionsLoading = _useSelector.actionsLoading,\n      remarkForEdit = _useSelector.remarkForEdit;\n\n  useEffect(function () {\n    // server request for getting remark by seleted id\n    dispatch(actions.fetchRemark(remarksUIProps.id));\n  }, [remarksUIProps.id, dispatch]);\n\n  var saveRemark = function saveRemark(remark) {\n    remark.dueDate = getFormattedDate(remark.dueDate);\n\n    if (!remarksUIProps.id) {\n      // server request for creating remarks\n      dispatch(actions.createRemark(remark)).then(function () {\n        // refresh list after deletion\n        dispatch(actions.fetchRemarks(remarksUIProps.queryParams, remarksUIProps.productId)).then(function () {\n          // clear selections list\n          remarksUIProps.setIds([]); // closing edit modal\n\n          remarksUIProps.closeEditRemarkDialog();\n        });\n      });\n    } else {\n      // server request for updating remarks\n      dispatch(actions.updateRemark(remark)).then(function () {\n        // refresh list after deletion\n        dispatch( // refresh list after deletion\n        actions.fetchRemarks(remarksUIProps.queryParams, remarksUIProps.productId)).then(function () {\n          // clear selections list\n          remarksUIProps.setIds([]); // closing edit modal\n\n          remarksUIProps.closeEditRemarkDialog();\n        });\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    show: remarksUIProps.showEditRemarkDialog,\n    onHide: remarksUIProps.closeEditRemarkDialog,\n    \"aria-labelledby\": \"example-modal-sizes-title-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(RemarkEditDialogHeader, {\n    id: remarksUIProps.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(RemarkEditForm, {\n    saveRemark: saveRemark,\n    actionsLoading: actionsLoading,\n    remark: remarkForEdit || remarksUIProps.initRemark,\n    onHide: remarksUIProps.closeEditRemarkDialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"names":["React","useEffect","useMemo","Modal","shallowEqual","useDispatch","useSelector","actions","RemarkEditDialogHeader","RemarkEditForm","useRemarksUIContext","getFormattedDate","date","year","getFullYear","month","getMonth","toString","length","day","getDate","RemarkEditDialog","remarksUIContext","remarksUIProps","id","selectedId","setIds","productId","queryParams","showEditRemarkDialog","closeEditRemarkDialog","initRemark","dispatch","state","actionsLoading","remarks","remarkForEdit","fetchRemark","saveRemark","remark","dueDate","createRemark","then","fetchRemarks","updateRemark"],"sources":["/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/ECommerce/pages/products/product-remarks/remark-edit-dialog/RemarkEditDialog.js"],"sourcesContent":["import React, { useEffect, useMemo } from \"react\";\r\nimport { Modal } from \"react-bootstrap\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport * as actions from \"../../../../_redux/remarks/remarksActions\";\r\nimport { RemarkEditDialogHeader } from \"./RemarkEditDialogHeader\";\r\nimport { RemarkEditForm } from \"./RemarkEditForm\";\r\nimport { useRemarksUIContext } from \"../RemarksUIContext\";\r\n\r\nfunction getFormattedDate(date) {\r\n  if (typeof date === \"string\") {\r\n    return date;\r\n  }\r\n\r\n  var year = date.getFullYear();\r\n\r\n  var month = (1 + date.getMonth()).toString();\r\n  month = month.length > 1 ? month : \"0\" + month;\r\n\r\n  var day = date.getDate().toString();\r\n  day = day.length > 1 ? day : \"0\" + day;\r\n\r\n  return month + \"/\" + day + \"/\" + year;\r\n}\r\n\r\nexport function RemarkEditDialog() {\r\n  // Remarks UI Context\r\n  const remarksUIContext = useRemarksUIContext();\r\n  const remarksUIProps = useMemo(() => {\r\n    return {\r\n      id: remarksUIContext.selectedId,\r\n      setIds: remarksUIContext.setIds,\r\n      productId: remarksUIContext.productId,\r\n      queryParams: remarksUIContext.queryParams,\r\n      showEditRemarkDialog: remarksUIContext.showEditRemarkDialog,\r\n      closeEditRemarkDialog: remarksUIContext.closeEditRemarkDialog,\r\n      initRemark: remarksUIContext.initRemark,\r\n    };\r\n  }, [remarksUIContext]);\r\n\r\n  // Remarks Redux state\r\n  const dispatch = useDispatch();\r\n  const { actionsLoading, remarkForEdit } = useSelector(\r\n    (state) => ({\r\n      actionsLoading: state.remarks.actionsLoading,\r\n      remarkForEdit: state.remarks.remarkForEdit,\r\n    }),\r\n    shallowEqual\r\n  );\r\n\r\n  useEffect(() => {\r\n    // server request for getting remark by seleted id\r\n    dispatch(actions.fetchRemark(remarksUIProps.id));\r\n  }, [remarksUIProps.id, dispatch]);\r\n\r\n  const saveRemark = (remark) => {\r\n    remark.dueDate = getFormattedDate(remark.dueDate);\r\n    if (!remarksUIProps.id) {\r\n      // server request for creating remarks\r\n      dispatch(actions.createRemark(remark)).then(() => {\r\n        // refresh list after deletion\r\n        dispatch(\r\n          actions.fetchRemarks(\r\n            remarksUIProps.queryParams,\r\n            remarksUIProps.productId\r\n          )\r\n        ).then(() => {\r\n          // clear selections list\r\n          remarksUIProps.setIds([]);\r\n          // closing edit modal\r\n          remarksUIProps.closeEditRemarkDialog();\r\n        });\r\n      });\r\n    } else {\r\n      // server request for updating remarks\r\n      dispatch(actions.updateRemark(remark)).then(() => {\r\n        // refresh list after deletion\r\n        dispatch(\r\n          // refresh list after deletion\r\n          actions.fetchRemarks(\r\n            remarksUIProps.queryParams,\r\n            remarksUIProps.productId\r\n          )\r\n        ).then(() => {\r\n          // clear selections list\r\n          remarksUIProps.setIds([]);\r\n          // closing edit modal\r\n          remarksUIProps.closeEditRemarkDialog();\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      show={remarksUIProps.showEditRemarkDialog}\r\n      onHide={remarksUIProps.closeEditRemarkDialog}\r\n      aria-labelledby=\"example-modal-sizes-title-lg\"\r\n    >\r\n      <RemarkEditDialogHeader id={remarksUIProps.id} />\r\n      <RemarkEditForm\r\n        saveRemark={saveRemark}\r\n        actionsLoading={actionsLoading}\r\n        remark={remarkForEdit || remarksUIProps.initRemark}\r\n        onHide={remarksUIProps.closeEditRemarkDialog}\r\n      />\r\n    </Modal>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}