{"ast":null,"code":"import _toConsumableArray from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/Inventory/configure/product-configure/product-configure-table/ProductConfigureTable.js\";\nimport React, { useState } from \"react\";\nimport { Route, useHistory } from \"react-router-dom\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport { useIntl } from \"react-intl\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport { ActionsColumnFormatter } from \"./ActionsColumnFormatter\";\nimport { CommonDeleteModal } from \"../../../../Common/CommonDeleteModal\";\nimport axios from \"axios\";\nimport { showError, showSuccess } from \"../../../../../pages/Alert\";\nexport function ProductConfigureTable(_ref) {\n  var _this = this;\n\n  var setSingleAll = _ref.setSingleAll,\n      singleAll = _ref.singleAll,\n      productProfileList = _ref.productProfileList,\n      setProductProfileList = _ref.setProductProfileList,\n      getBreadCrum = _ref.getBreadCrum,\n      reloadProductList = _ref.reloadProductList;\n  var history = useHistory();\n  var intl = useIntl();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      deleteId = _useState2[0],\n      setDeleteId = _useState2[1];\n\n  var openViewPage = function openViewPage(data) {\n    console.log(data); // history.push('/salescollection/sales/slaes-booking-view', { state: data });\n  };\n\n  var openEditPage = function openEditPage(data) {\n    var breadCrum = getBreadCrum(data.product_category_id);\n    history.push({\n      pathname: '/inventory/configure/product-configure/new',\n      state: {\n        data: data,\n        breadCrum: breadCrum\n      }\n    });\n  };\n\n  var openDeleteDialog = function openDeleteDialog(data) {\n    setDeleteId(data.id);\n    history.push('/inventory/configure/product-configure/list/delete');\n  };\n\n  var deleteProduct = function deleteProduct(id) {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/product/\").concat(id);\n    axios.delete(URL).then(function (response) {\n      if (response.data.success == true) {\n        showSuccess(response.data.message); // reloadProductList('');\n\n        var tempProductProfileList = _toConsumableArray(productProfileList);\n\n        var pIndex = tempProductProfileList.findIndex(function (obj) {\n          return obj.id == id;\n        });\n        tempProductProfileList.splice(pIndex, 1);\n        setProductProfileList(tempProductProfileList);\n      } else {\n        showError(response.data.message);\n      }\n    }).catch(function (err) {\n      showError(err);\n    });\n    history.push('/inventory/configure/product-configure/list');\n  };\n\n  var singleWiseSelectHandler = function singleWiseSelectHandler(data, isSelect) {\n    if (isSelect == true) {\n      var temp = _toConsumableArray(singleAll);\n\n      temp.push(data);\n      setSingleAll(temp);\n    } else {\n      if (singleAll.length >= 0) {\n        var _temp = _toConsumableArray(singleAll);\n\n        var index = _temp.findIndex(function (obj) {\n          return obj.id == data.id;\n        });\n\n        _temp.splice(index, 1);\n\n        setSingleAll(_temp);\n      }\n    }\n  };\n\n  var allSelectHandler = function allSelectHandler(allData, isSelect) {\n    if (isSelect == true) {\n      setSingleAll(allData);\n    } else {\n      if (allData.length >= 0) {\n        var temp = _toConsumableArray(singleAll);\n\n        var _loop = function _loop(i) {\n          var index = temp.findIndex(function (obj) {\n            return obj.id == allData[i].id;\n          });\n          temp.splice(index, 1);\n          setSingleAll(temp);\n        };\n\n        for (var i = 0; i < allData.length; i++) {\n          _loop(i);\n        }\n      }\n    }\n  };\n\n  var columns = [{\n    dataField: \"product_sku\",\n    text: \"SKU\"\n  }, {\n    dataField: \"name\",\n    text: \"Product Name\",\n    formatter: function formatter(cellContent, row) {\n      return cellContent + ' ' + row.item_size + ' ' + row.uom_name + ' * ' + row.pack_size;\n    }\n  }, {\n    dataField: \"action\",\n    text: \"Actions\",\n    formatter: ActionsColumnFormatter,\n    formatExtraData: {\n      openViewPage: openViewPage,\n      openEditPage: openEditPage,\n      openDeleteDialog: openDeleteDialog\n    },\n    classes: \"text-center\",\n    headerClasses: \"text-center\",\n    style: {\n      minWidth: \"8.5rem\"\n    }\n  }];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Route, {\n    path: \"/inventory/configure/product-configure/list/delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, function (_ref2) {\n    var history = _ref2.history,\n        match = _ref2.match;\n    return /*#__PURE__*/React.createElement(CommonDeleteModal, {\n      show: match != null,\n      id: deleteId,\n      deleteAction: deleteProduct,\n      onHide: function onHide() {\n        history.push(\"/inventory/configure/product-configure/list\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    });\n  }), /*#__PURE__*/React.createElement(BootstrapTable, {\n    wrapperClasses: \"table-responsive\",\n    classes: \"table table-head-custom table-vertical-center overflow-hidden\",\n    bootstrap4: true,\n    bordered: false,\n    keyField: \"id\",\n    data: productProfileList,\n    columns: columns,\n    selectRow: {\n      mode: 'checkbox',\n      onSelect: function onSelect(row, isSelect, rowIndex, e) {\n        singleWiseSelectHandler(row, isSelect);\n      },\n      onSelectAll: function onSelectAll(isSelect, rows, e) {\n        allSelectHandler(rows, isSelect);\n      }\n    },\n    pagination: paginationFactory({\n      sizePerPage: 10,\n      showTotal: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 6\n    }\n  }));\n}","map":{"version":3,"names":["React","useState","Route","useHistory","BootstrapTable","useIntl","paginationFactory","ActionsColumnFormatter","CommonDeleteModal","axios","showError","showSuccess","ProductConfigureTable","setSingleAll","singleAll","productProfileList","setProductProfileList","getBreadCrum","reloadProductList","history","intl","deleteId","setDeleteId","openViewPage","data","console","log","openEditPage","breadCrum","product_category_id","push","pathname","state","openDeleteDialog","id","deleteProduct","URL","process","env","REACT_APP_API_URL","delete","then","response","success","message","tempProductProfileList","pIndex","findIndex","obj","splice","catch","err","singleWiseSelectHandler","isSelect","temp","length","index","allSelectHandler","allData","i","columns","dataField","text","formatter","cellContent","row","item_size","uom_name","pack_size","formatExtraData","classes","headerClasses","style","minWidth","match","mode","onSelect","rowIndex","e","onSelectAll","rows","sizePerPage","showTotal"],"sources":["/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/Inventory/configure/product-configure/product-configure-table/ProductConfigureTable.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Route, useHistory } from \"react-router-dom\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport { useIntl } from \"react-intl\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\nimport { ActionsColumnFormatter } from \"./ActionsColumnFormatter\";\r\nimport { CommonDeleteModal } from \"../../../../Common/CommonDeleteModal\";\r\nimport axios from \"axios\";\r\nimport { showError, showSuccess } from \"../../../../../pages/Alert\";\r\n\r\nexport function ProductConfigureTable({setSingleAll, singleAll, productProfileList, setProductProfileList, getBreadCrum, reloadProductList }) {\r\n  let history = useHistory();\r\n  const intl = useIntl();\r\n  const [deleteId, setDeleteId] = useState(0);\r\n\r\n  const openViewPage = (data) => {\r\n    console.log(data);\r\n    // history.push('/salescollection/sales/slaes-booking-view', { state: data });\r\n  }\r\n  \r\n  const openEditPage = (data) => {\r\n    const breadCrum = getBreadCrum(data.product_category_id);\r\n    history.push({pathname: '/inventory/configure/product-configure/new', state: { data, breadCrum }});\r\n  }\r\n  \r\n  const openDeleteDialog = (data) => {\r\n    setDeleteId(data.id)\r\n    history.push('/inventory/configure/product-configure/list/delete');\r\n  } \r\n\r\n  const deleteProduct = (id) => {\r\n    const URL = `${process.env.REACT_APP_API_URL}/api/product/${id}`;\r\n        axios.delete(URL).then(response => {\r\n            if(response.data.success == true){\r\n              showSuccess(response.data.message)\r\n              // reloadProductList('');\r\n              const tempProductProfileList = [...productProfileList]\r\n              const pIndex = tempProductProfileList.findIndex(obj => obj.id == id);\r\n              tempProductProfileList.splice(pIndex,1);\r\n              setProductProfileList(tempProductProfileList)\r\n            }\r\n            else{\r\n              showError(response.data.message);\r\n            }\r\n        }).catch(err => {\r\n            showError(err);\r\n        });\r\n    history.push('/inventory/configure/product-configure/list');\r\n  }\r\n\r\n  const singleWiseSelectHandler = (data, isSelect) => {\r\n    if (isSelect == true) {\r\n      let temp = [...singleAll]\r\n      temp.push(data)\r\n      setSingleAll(temp)\r\n    } else {\r\n      if (singleAll.length >= 0) {\r\n        let temp = [...singleAll]\r\n        const index = temp.findIndex(obj => obj.id == data.id);\r\n        temp.splice(index, 1);\r\n        setSingleAll(temp)\r\n      }\r\n    }\r\n  }\r\n  const allSelectHandler = (allData, isSelect) => {\r\n    if (isSelect == true) {\r\n      setSingleAll(allData)\r\n    } else {\r\n      if (allData.length >= 0) {\r\n        let temp = [...singleAll]\r\n        for (let i = 0; i < allData.length; i++) {\r\n          const index = temp.findIndex(obj => obj.id == allData[i].id);\r\n          temp.splice(index, 1);\r\n          setSingleAll(temp)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const columns = [\r\n    {\r\n      dataField: \"product_sku\",\r\n      text: \"SKU\",\r\n    },\r\n    {\r\n      dataField: \"name\",\r\n      text: \"Product Name\",\r\n      formatter : (cellContent, row) => {\r\n        return cellContent +' '+ row.item_size+ ' ' +row.uom_name+ ' * ' +row.pack_size;\r\n      }\r\n    },\r\n    {\r\n      dataField: \"action\",\r\n      text: \"Actions\",\r\n      formatter: ActionsColumnFormatter,\r\n      formatExtraData: {\r\n        openViewPage: openViewPage,\r\n        openEditPage: openEditPage,\r\n        openDeleteDialog: openDeleteDialog\r\n      },\r\n      classes: \"text-center\",\r\n      headerClasses: \"text-center\",\r\n      style: {\r\n        minWidth: \"8.5rem\",\r\n      },\r\n    },\r\n  ];\r\n\r\n\r\n  return (\r\n    <>\r\n\r\n      <Route path=\"/inventory/configure/product-configure/list/delete\">\r\n          {({ history, match }) => (\r\n              <CommonDeleteModal\r\n                  show={match != null}\r\n                  id={deleteId}\r\n                  deleteAction={deleteProduct}\r\n                  onHide={() => {\r\n                      history.push(\"/inventory/configure/product-configure/list\");                      \r\n                  }}\r\n              />\r\n          )}\r\n      </Route>\r\n\r\n     <BootstrapTable\r\n        wrapperClasses=\"table-responsive\"\r\n        classes=\"table table-head-custom table-vertical-center overflow-hidden\"\r\n        bootstrap4\r\n        bordered={false}\r\n        keyField=\"id\"\r\n        data={productProfileList}\r\n        columns={columns}\r\n        selectRow={\r\n          {\r\n            mode: 'checkbox',\r\n            onSelect: (row, isSelect, rowIndex, e) => {\r\n              singleWiseSelectHandler(row, isSelect);\r\n            },\r\n            onSelectAll: (isSelect, rows, e) => {\r\n              allSelectHandler(rows, isSelect);\r\n\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        pagination={paginationFactory({ sizePerPage: 10, showTotal: true })}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,KAAT,EAAgBC,UAAhB,QAAkC,kBAAlC;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,SAASC,sBAAT,QAAuC,0BAAvC;AACA,SAASC,iBAAT,QAAkC,sCAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,4BAAvC;AAEA,OAAO,SAASC,qBAAT,OAAuI;EAAA;;EAAA,IAAvGC,YAAuG,QAAvGA,YAAuG;EAAA,IAAzFC,SAAyF,QAAzFA,SAAyF;EAAA,IAA9EC,kBAA8E,QAA9EA,kBAA8E;EAAA,IAA1DC,qBAA0D,QAA1DA,qBAA0D;EAAA,IAAnCC,YAAmC,QAAnCA,YAAmC;EAAA,IAArBC,iBAAqB,QAArBA,iBAAqB;EAC5I,IAAIC,OAAO,GAAGhB,UAAU,EAAxB;EACA,IAAMiB,IAAI,GAAGf,OAAO,EAApB;;EACA,gBAAgCJ,QAAQ,CAAC,CAAD,CAAxC;EAAA;EAAA,IAAOoB,QAAP;EAAA,IAAiBC,WAAjB;;EAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD,EAAU;IAC7BC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAD6B,CAE7B;EACD,CAHD;;EAKA,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAACH,IAAD,EAAU;IAC7B,IAAMI,SAAS,GAAGX,YAAY,CAACO,IAAI,CAACK,mBAAN,CAA9B;IACAV,OAAO,CAACW,IAAR,CAAa;MAACC,QAAQ,EAAE,4CAAX;MAAyDC,KAAK,EAAE;QAAER,IAAI,EAAJA,IAAF;QAAQI,SAAS,EAATA;MAAR;IAAhE,CAAb;EACD,CAHD;;EAKA,IAAMK,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACT,IAAD,EAAU;IACjCF,WAAW,CAACE,IAAI,CAACU,EAAN,CAAX;IACAf,OAAO,CAACW,IAAR,CAAa,oDAAb;EACD,CAHD;;EAKA,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,CAACD,EAAD,EAAQ;IAC5B,IAAME,GAAG,aAAMC,OAAO,CAACC,GAAR,CAAYC,iBAAlB,0BAAmDL,EAAnD,CAAT;IACIzB,KAAK,CAAC+B,MAAN,CAAaJ,GAAb,EAAkBK,IAAlB,CAAuB,UAAAC,QAAQ,EAAI;MAC/B,IAAGA,QAAQ,CAAClB,IAAT,CAAcmB,OAAd,IAAyB,IAA5B,EAAiC;QAC/BhC,WAAW,CAAC+B,QAAQ,CAAClB,IAAT,CAAcoB,OAAf,CAAX,CAD+B,CAE/B;;QACA,IAAMC,sBAAsB,sBAAO9B,kBAAP,CAA5B;;QACA,IAAM+B,MAAM,GAAGD,sBAAsB,CAACE,SAAvB,CAAiC,UAAAC,GAAG;UAAA,OAAIA,GAAG,CAACd,EAAJ,IAAUA,EAAd;QAAA,CAApC,CAAf;QACAW,sBAAsB,CAACI,MAAvB,CAA8BH,MAA9B,EAAqC,CAArC;QACA9B,qBAAqB,CAAC6B,sBAAD,CAArB;MACD,CAPD,MAQI;QACFnC,SAAS,CAACgC,QAAQ,CAAClB,IAAT,CAAcoB,OAAf,CAAT;MACD;IACJ,CAZD,EAYGM,KAZH,CAYS,UAAAC,GAAG,EAAI;MACZzC,SAAS,CAACyC,GAAD,CAAT;IACH,CAdD;IAeJhC,OAAO,CAACW,IAAR,CAAa,6CAAb;EACD,CAlBD;;EAoBA,IAAMsB,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAC5B,IAAD,EAAO6B,QAAP,EAAoB;IAClD,IAAIA,QAAQ,IAAI,IAAhB,EAAsB;MACpB,IAAIC,IAAI,sBAAOxC,SAAP,CAAR;;MACAwC,IAAI,CAACxB,IAAL,CAAUN,IAAV;MACAX,YAAY,CAACyC,IAAD,CAAZ;IACD,CAJD,MAIO;MACL,IAAIxC,SAAS,CAACyC,MAAV,IAAoB,CAAxB,EAA2B;QACzB,IAAID,KAAI,sBAAOxC,SAAP,CAAR;;QACA,IAAM0C,KAAK,GAAGF,KAAI,CAACP,SAAL,CAAe,UAAAC,GAAG;UAAA,OAAIA,GAAG,CAACd,EAAJ,IAAUV,IAAI,CAACU,EAAnB;QAAA,CAAlB,CAAd;;QACAoB,KAAI,CAACL,MAAL,CAAYO,KAAZ,EAAmB,CAAnB;;QACA3C,YAAY,CAACyC,KAAD,CAAZ;MACD;IACF;EACF,CAbD;;EAcA,IAAMG,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,OAAD,EAAUL,QAAV,EAAuB;IAC9C,IAAIA,QAAQ,IAAI,IAAhB,EAAsB;MACpBxC,YAAY,CAAC6C,OAAD,CAAZ;IACD,CAFD,MAEO;MACL,IAAIA,OAAO,CAACH,MAAR,IAAkB,CAAtB,EAAyB;QACvB,IAAID,IAAI,sBAAOxC,SAAP,CAAR;;QADuB,2BAEd6C,CAFc;UAGrB,IAAMH,KAAK,GAAGF,IAAI,CAACP,SAAL,CAAe,UAAAC,GAAG;YAAA,OAAIA,GAAG,CAACd,EAAJ,IAAUwB,OAAO,CAACC,CAAD,CAAP,CAAWzB,EAAzB;UAAA,CAAlB,CAAd;UACAoB,IAAI,CAACL,MAAL,CAAYO,KAAZ,EAAmB,CAAnB;UACA3C,YAAY,CAACyC,IAAD,CAAZ;QALqB;;QAEvB,KAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,OAAO,CAACH,MAA5B,EAAoCI,CAAC,EAArC,EAAyC;UAAA,MAAhCA,CAAgC;QAIxC;MACF;IACF;EACF,CAbD;;EAcA,IAAMC,OAAO,GAAG,CACd;IACEC,SAAS,EAAE,aADb;IAEEC,IAAI,EAAE;EAFR,CADc,EAKd;IACED,SAAS,EAAE,MADb;IAEEC,IAAI,EAAE,cAFR;IAGEC,SAAS,EAAG,mBAACC,WAAD,EAAcC,GAAd,EAAsB;MAChC,OAAOD,WAAW,GAAE,GAAb,GAAkBC,GAAG,CAACC,SAAtB,GAAiC,GAAjC,GAAsCD,GAAG,CAACE,QAA1C,GAAoD,KAApD,GAA2DF,GAAG,CAACG,SAAtE;IACD;EALH,CALc,EAYd;IACEP,SAAS,EAAE,QADb;IAEEC,IAAI,EAAE,SAFR;IAGEC,SAAS,EAAExD,sBAHb;IAIE8D,eAAe,EAAE;MACf9C,YAAY,EAAEA,YADC;MAEfI,YAAY,EAAEA,YAFC;MAGfM,gBAAgB,EAAEA;IAHH,CAJnB;IASEqC,OAAO,EAAE,aATX;IAUEC,aAAa,EAAE,aAVjB;IAWEC,KAAK,EAAE;MACLC,QAAQ,EAAE;IADL;EAXT,CAZc,CAAhB;EA8BA,oBACE,uDAEE,oBAAC,KAAD;IAAO,IAAI,EAAC,oDAAZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACK;IAAA,IAAGtD,OAAH,SAAGA,OAAH;IAAA,IAAYuD,KAAZ,SAAYA,KAAZ;IAAA,oBACG,oBAAC,iBAAD;MACI,IAAI,EAAEA,KAAK,IAAI,IADnB;MAEI,EAAE,EAAErD,QAFR;MAGI,YAAY,EAAEc,aAHlB;MAII,MAAM,EAAE,kBAAM;QACVhB,OAAO,CAACW,IAAR,CAAa,6CAAb;MACH,CANL;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADH;EAAA,CADL,CAFF,eAeC,oBAAC,cAAD;IACG,cAAc,EAAC,kBADlB;IAEG,OAAO,EAAC,+DAFX;IAGG,UAAU,MAHb;IAIG,QAAQ,EAAE,KAJb;IAKG,QAAQ,EAAC,IALZ;IAMG,IAAI,EAAEf,kBANT;IAOG,OAAO,EAAE6C,OAPZ;IAQG,SAAS,EACP;MACEe,IAAI,EAAE,UADR;MAEEC,QAAQ,EAAE,kBAACX,GAAD,EAAMZ,QAAN,EAAgBwB,QAAhB,EAA0BC,CAA1B,EAAgC;QACxC1B,uBAAuB,CAACa,GAAD,EAAMZ,QAAN,CAAvB;MACD,CAJH;MAKE0B,WAAW,EAAE,qBAAC1B,QAAD,EAAW2B,IAAX,EAAiBF,CAAjB,EAAuB;QAClCrB,gBAAgB,CAACuB,IAAD,EAAO3B,QAAP,CAAhB;MAED;IARH,CATL;IAsBG,UAAU,EAAE/C,iBAAiB,CAAC;MAAE2E,WAAW,EAAE,EAAf;MAAmBC,SAAS,EAAE;IAA9B,CAAD,CAtBhC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAfD,CADF;AA0CD"},"metadata":{},"sourceType":"module"}