{"ast":null,"code":"import _defineProperty from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/UserManagement/userCompanyMap/UserCompanyMap.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport Button from '@material-ui/core/Button';\nimport { CardBody } from \"../../../../_metronic/_partials/controls\";\nimport 'react-phone-number-input/style.css';\nimport UserBreadCrum from \"../bread-crum/UserBreadCrum\";\nimport TransferList from \"../../Common/TransferList\";\nimport axios from \"axios\";\nimport { showError, showSuccess } from \"../../../pages/Alert\";\nexport default function UserCompanyMap() {\n  var _this = this;\n\n  var fields = {\n    id: null,\n    userId: \"\",\n    companyList: [],\n    isActive: true\n  };\n\n  var _useState = useState(fields),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputs = _useState2[0],\n      setInputs = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userList = _useState4[0],\n      setUserList = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      companyList = _useState6[0],\n      setCompanyList = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedCompanyList = _useState8[0],\n      setSelectedCompanyList = _useState8[1];\n\n  useEffect(function () {\n    getUserList();\n  }, []);\n  useEffect(function () {\n    setInputs(function (values) {\n      return _objectSpread(_objectSpread({}, values), {}, _defineProperty({}, 'companyList', selectedCompanyList));\n    });\n  }, [selectedCompanyList]);\n\n  var handleChange = function handleChange(event) {\n    var name = event.target.name;\n    var value = event.target.value;\n    setInputs(function (values) {\n      return _objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, value));\n    });\n\n    if (value) {\n      getAlreadyMappedCompanies(value);\n    } else {\n      setCompanyList([]);\n      setSelectedCompanyList([]);\n    }\n  };\n\n  var getUserList = function getUserList() {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/auth/get-active-users\");\n    axios.get(URL).then(function (response) {\n      setUserList(response.data.data);\n    });\n  };\n\n  var getAlreadyMappedCompanies = function getAlreadyMappedCompanies(userId) {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/application-user-company-mapping/get-all-company-by-user/\") + userId;\n    axios.get(URL).then(function (response) {\n      setCompanyList(response.data.data.unmappedCompanies);\n      setSelectedCompanyList(response.data.data.mappedCompanies);\n    });\n  };\n\n  var saveMapping = function saveMapping() {\n    var URL = \"\".concat(process.env.REACT_APP_API_URL, \"/api/application-user-company-mapping\");\n    axios.post(URL, inputs).then(function (response) {\n      if (response.data.success === true) {\n        showSuccess(response.data.message);\n      } else {\n        showError(response.data.message);\n      }\n    }).catch(function (err) {\n      showError(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(UserBreadCrum, {\n    menuTitle: \"User Company Map\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"create-field-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, \"User Company Mapping\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5 row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"level-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 37\n    }\n  }, \"User \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 73\n    }\n  }, \"*\")), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"userId\",\n    className: \"form-control\",\n    name: \"userId\",\n    value: inputs.userId || \"\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 41\n    }\n  }, \"Select user..\"), userList.map(function (user) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: user.id,\n      value: user.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 49\n      }\n    }, user.designation ? '[' + user.designation.name + '] ' + user.name : user.name);\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"level-title ml-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 37\n    }\n  }, \"Choose Companies\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 89\n    }\n  }, \"*\")), /*#__PURE__*/React.createElement(TransferList, {\n    left: companyList,\n    setLeft: setCompanyList,\n    right: selectedCompanyList,\n    setRight: setSelectedCompanyList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(Button, {\n    className: \"float-right mt-5\",\n    id: \"saveBtn\",\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: saveMapping,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, \"Save Mapping\"))))));\n}","map":{"version":3,"names":["React","useEffect","useState","Card","Button","CardBody","UserBreadCrum","TransferList","axios","showError","showSuccess","UserCompanyMap","fields","id","userId","companyList","isActive","inputs","setInputs","userList","setUserList","setCompanyList","selectedCompanyList","setSelectedCompanyList","getUserList","values","handleChange","event","name","target","value","getAlreadyMappedCompanies","URL","process","env","REACT_APP_API_URL","get","then","response","data","unmappedCompanies","mappedCompanies","saveMapping","post","success","message","catch","err","map","user","designation"],"sources":["/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/app/modules/UserManagement/userCompanyMap/UserCompanyMap.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport Button from '@material-ui/core/Button';\nimport { CardBody } from \"../../../../_metronic/_partials/controls\";\nimport 'react-phone-number-input/style.css';\nimport UserBreadCrum from \"../bread-crum/UserBreadCrum\";\nimport TransferList from \"../../Common/TransferList\";\nimport axios from \"axios\";\nimport { showError, showSuccess } from \"../../../pages/Alert\";\n\nexport default function UserCompanyMap() {    \n\n    const fields = {\n        id: null,\n        userId: \"\",\n        companyList: [],\n        isActive: true\n    }\n\n    const [inputs, setInputs] = useState(fields);\n    const [userList, setUserList] = useState([]);\n    const [companyList, setCompanyList] = useState([]);\n    const [selectedCompanyList, setSelectedCompanyList] = useState([]);\n\n    useEffect(() => {\n        getUserList();\n    },[]);\n    \n    useEffect(() => {\n        setInputs(values => ({ ...values, ['companyList']: selectedCompanyList}));\n    },[selectedCompanyList]);\n\n    const handleChange = (event) => {\n        let name = event.target.name;\n        let value = event.target.value;\n\n        setInputs(values => ({ ...values, [name]: value }));\n\n        if(value){\n            getAlreadyMappedCompanies(value);\n        }else{\n            setCompanyList([]);\n            setSelectedCompanyList([]);\n        }\n        \n    }\n\n    const getUserList = () => {\n        const URL = `${process.env.REACT_APP_API_URL}/auth/get-active-users`;\n        axios.get(URL).then(response => {\n            setUserList(response.data.data)\n        });\n    }\n    \n    const getAlreadyMappedCompanies = (userId) => {\n        const URL = `${process.env.REACT_APP_API_URL}/api/application-user-company-mapping/get-all-company-by-user/` + userId;\n        axios.get(URL).then(response => {\n            setCompanyList(response.data.data.unmappedCompanies)\n            setSelectedCompanyList(response.data.data.mappedCompanies)\n        });\n    }\n\n    const saveMapping = () => {\n        const URL = `${process.env.REACT_APP_API_URL}/api/application-user-company-mapping`;\n        axios.post(URL, inputs).then(response => {\n            if (response.data.success === true) {\n                showSuccess(response.data.message);\n\n            } else {\n                showError(response.data.message);\n            }\n        }).catch(err => {\n            showError(err);\n        });\n    }\n\n    return (\n        <>\n            {/* BREAD CRUM ROW */}\n            <UserBreadCrum menuTitle=\"User Company Map\" />\n\n            <Card>\n                <CardBody>\n                    <div className=\"row\">\n                        <div className=\"col-lg-12\">\n                            <span className=\"create-field-title\">User Company Mapping</span>\n\n                            <div className='mt-5 row'>\n                                <div className='col-xl-3'>\n                                    <label className='level-title'>User <span className=\"text-danger \">*</span></label>\n                                    <select id=\"userId\" className='form-control' name=\"userId\" \n                                    value={inputs.userId || \"\"} onChange={handleChange}>\n\n                                        <option value=\"\">Select user..</option>\n                                            {userList.map((user) => (\n                                                <option key={user.id} value={user.id}>\n                                                    {user.designation ? '[' + user.designation.name +'] ' + user.name : user.name}\n                                                </option>\n                                            ))}\n                                    </select>\n                                </div>\n\n                                <div className='col-xl-9'>\n                                    <label className='level-title ml-5'>Choose Companies<span className=\"text-danger \">*</span></label>\n                                    \n                                    <TransferList left={companyList} setLeft={setCompanyList} \n                                    right={selectedCompanyList} setRight={setSelectedCompanyList}/>\n                                </div>\n                            </div>      \n\n                            <Button className=\"float-right mt-5\" id=\"saveBtn\" variant=\"contained\" color=\"primary\"\n                                onClick={saveMapping}>\n                                Save Mapping\n                            </Button>                  \n\n                        </div>\n                    </div>\n                </CardBody>\n            </Card>\n        </>);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}