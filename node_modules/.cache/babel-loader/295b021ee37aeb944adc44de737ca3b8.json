{"ast":null,"code":"import { showError } from \"../app/pages/Alert\";\nexport default function setupAxios(axios, store) {\n  axios.interceptors.request.use(function (config) {\n    //alert('ok...');\n    // alert('Start loading...');\n    var _store$getState = store.getState(),\n        authToken = _store$getState.auth.authToken;\n\n    if (authToken) {\n      config.headers.Authorization = \"Bearer \".concat(authToken);\n    }\n\n    return config;\n  }, function (err) {\n    // alert('Start loading...');\n    Promise.reject(err);\n  });\n  axios.interceptors.response.use(function (response) {\n    // alert('End loading...');\n    if (response.status === 401) {\n      // alert(\"You are not authorized\");\n      showError('You are not authorized');\n    }\n\n    return response;\n  }, function (error) {\n    // alert('End loading...');\n    if (error.response == undefined) {\n      // alert(error);\n      showError(error);\n    }\n\n    if (error.response && error.response.data) {\n      return Promise.reject(error.response.data);\n    }\n\n    return Promise.reject(error.message);\n  });\n}","map":{"version":3,"names":["showError","setupAxios","axios","store","interceptors","request","use","config","getState","authToken","auth","headers","Authorization","err","Promise","reject","response","status","error","undefined","data","message"],"sources":["/home/sunipa/projects/sncworkspace/ntl-snc_frontend/src/redux/setupAxios.js"],"sourcesContent":["import { showError } from \"../app/pages/Alert\";\r\n\r\nexport default function setupAxios(axios, store) {\r\n  axios.interceptors.request.use(\r\n    config => { //alert('ok...');\r\n      // alert('Start loading...');\r\n      const {\r\n        auth: { authToken }\r\n      } = store.getState();\r\n\r\n      if (authToken) {\r\n        config.headers.Authorization = `Bearer ${authToken}`;\r\n      }\r\n      return config;\r\n    },\r\n    err => {\r\n      // alert('Start loading...');\r\n      Promise.reject(err)\r\n    }\r\n  );\r\n\r\n  axios.interceptors.response.use((response) => {\r\n    // alert('End loading...');\r\n      if(response.status === 401) {\r\n          // alert(\"You are not authorized\");\r\n          showError('You are not authorized');\r\n      }\r\n      return response;\r\n  }, \r\n  (error) => {\r\n    // alert('End loading...');\r\n    if(error.response == undefined){\r\n      // alert(error);\r\n      showError(error);\r\n    }\r\n    \r\n    if (error.response && error.response.data) {\r\n        return Promise.reject(error.response.data);\r\n    }\r\n    return Promise.reject(error.message);\r\n  });\r\n}\r\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,oBAA1B;AAEA,eAAe,SAASC,UAAT,CAAoBC,KAApB,EAA2BC,KAA3B,EAAkC;EAC/CD,KAAK,CAACE,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAAAC,MAAM,EAAI;IAAE;IACV;IACA,sBAEIJ,KAAK,CAACK,QAAN,EAFJ;IAAA,IACUC,SADV,mBACEC,IADF,CACUD,SADV;;IAIA,IAAIA,SAAJ,EAAe;MACbF,MAAM,CAACI,OAAP,CAAeC,aAAf,oBAAyCH,SAAzC;IACD;;IACD,OAAOF,MAAP;EACD,CAXH,EAYE,UAAAM,GAAG,EAAI;IACL;IACAC,OAAO,CAACC,MAAR,CAAeF,GAAf;EACD,CAfH;EAkBAX,KAAK,CAACE,YAAN,CAAmBY,QAAnB,CAA4BV,GAA5B,CAAgC,UAACU,QAAD,EAAc;IAC5C;IACE,IAAGA,QAAQ,CAACC,MAAT,KAAoB,GAAvB,EAA4B;MACxB;MACAjB,SAAS,CAAC,wBAAD,CAAT;IACH;;IACD,OAAOgB,QAAP;EACH,CAPD,EAQA,UAACE,KAAD,EAAW;IACT;IACA,IAAGA,KAAK,CAACF,QAAN,IAAkBG,SAArB,EAA+B;MAC7B;MACAnB,SAAS,CAACkB,KAAD,CAAT;IACD;;IAED,IAAIA,KAAK,CAACF,QAAN,IAAkBE,KAAK,CAACF,QAAN,CAAeI,IAArC,EAA2C;MACvC,OAAON,OAAO,CAACC,MAAR,CAAeG,KAAK,CAACF,QAAN,CAAeI,IAA9B,CAAP;IACH;;IACD,OAAON,OAAO,CAACC,MAAR,CAAeG,KAAK,CAACG,OAArB,CAAP;EACD,CAnBD;AAoBD"},"metadata":{},"sourceType":"module"}